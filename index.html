<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>DMTools - D&D Lighting & Sound Controller</title>
  <link rel="stylesheet" href="css/main.css">
</head>
<body>
  <!-- Loading screen -->
  <div id="loading" class="loading">
    <div class="loading-spinner"></div>
    <p>Initializing DMTools...</p>
  </div>

  <!-- Main application content -->
  <div id="app-content" style="display: none;">
    <header>
      <div class="header-left">
        <img src="logo.png" alt="DMTools Logo" class="header-logo">
        <div class="header-title">
          <h1>DMTools.basestar</h1>
          <p class="subtitle">D&D Lighting & Sound Controller</p>
        </div>
      </div>

      <div class="connection-status">
        <div class="status-item">
          <span class="status-label">WLED</span>
          <span id="status-wled" class="status-indicator status-disconnected"></span>
        </div>
        <div class="status-item">
          <span class="status-label">Home Assistant</span>
          <span id="status-ha" class="status-indicator status-disconnected"></span>
        </div>
        <button id="disconnect-wled" class="disconnect-button" title="Release WLED control to allow other devices to control it">
          Release WLED Control
        </button>
      </div>
    </header>

    <main>
      <!-- Error message display -->
      <div id="error-message" class="error-message" style="display: none;"></div>

      <!-- Notification display -->
      <div id="notification" class="notification" style="display: none;"></div>

      <!-- Ambient section -->
      <section class="control-section">
        <div class="section-header">
          <h2>Ambient Scenes</h2>
          <button id="stop-scenes" class="section-stop-button">Stop All Scenes</button>
        </div>
        <div id="scenes-container" class="button-grid">
          <!-- Scene buttons will be generated dynamically -->
        </div>
      </section>

      <!-- Triggers section -->
      <section class="control-section">
        <div class="section-header">
          <h2>Triggers</h2>
          <button id="stop-triggers" class="section-stop-button">Stop All Triggers</button>
        </div>
        <div id="triggers-container" class="button-grid">
          <!-- Trigger buttons will be generated dynamically -->
        </div>
      </section>

      <!-- Music section -->
      <section class="control-section">
        <div class="section-header">
          <h2>Music</h2>
          <button id="stop-music" class="section-stop-button">Stop Music</button>
        </div>

        <!-- Music player controls -->
        <div id="music-player" class="music-player" style="display: none;">
          <div class="music-player-top">
            <div class="music-player-info">
              <div class="music-player-track" id="current-track-name">No track playing</div>
              <div class="music-player-collection" id="current-collection-name"></div>
            </div>
            <div class="music-player-controls">
              <button id="music-prev" class="music-control-button" title="Previous Track">◀</button>
              <button id="music-play-pause" class="music-control-button" title="Play/Pause">⏸</button>
              <button id="music-next" class="music-control-button" title="Next Track">▶</button>
            </div>
          </div>
          <div class="music-progress-container">
            <span class="music-time" id="music-current-time">0:00</span>
            <div class="music-progress-bar">
              <div class="music-progress-fill" id="music-progress-fill"></div>
            </div>
            <span class="music-time" id="music-duration">0:00</span>
          </div>
        </div>

        <!-- Music library browser -->
        <div id="music-library" class="music-library">
          <!-- Categories and collections will be generated dynamically -->
        </div>
      </section>

      <!-- Volume controls -->
      <section class="control-section">
        <div class="section-header">
          <h2>Volume Controls</h2>
        </div>
        <div class="volume-controls">
          <div class="volume-control">
            <label for="volume-ambient">
              Ambient
              <span id="volume-ambient-value" class="volume-value">60</span>%
            </label>
            <input type="range" id="volume-ambient" min="0" max="1" step="0.01" value="0.6">
          </div>
          <div class="volume-control">
            <label for="volume-trigger">
              Triggers
              <span id="volume-trigger-value" class="volume-value">80</span>%
            </label>
            <input type="range" id="volume-trigger" min="0" max="1" step="0.01" value="0.8">
          </div>
          <div class="volume-control">
            <label for="volume-music">
              Music
              <span id="volume-music-value" class="volume-value">70</span>%
            </label>
            <input type="range" id="volume-music" min="0" max="1" step="0.01" value="0.7">
          </div>
        </div>
      </section>
    </main>

    <footer>
    </footer>
  </div>

  <!-- Load scripts -->
  <script src="js/config-manager.js"></script>
  <script src="js/audio-engine.js"></script>
  <script src="js/lighting.js"></script>
  <script src="js/scene-manager.js"></script>
  <script src="js/music-manager.js"></script>
  <script src="js/app.js"></script>
</body>
</html>
